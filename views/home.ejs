<%- include('partials/headers/header-menu') -%>
  <main class="container">
    <section class="container-home">
      <section class="container-main-home">
        <section class="section-my-home section-my-leagues">
          <h2>add something</h2>
          <ul class="list-my-leagues list-add-recently">
            <li class="item-my-leagues add-league item-modal" data-bs-toggle="modal" data-bs-target="#add-data">
              <button type="button" class="btn">
                <i class="fa-solid fa-circle-plus fa-2xl"></i>
              </button>
            </li>
            <h2 class="recently-heading">recently added</h2>
            <li class="recently-added-item">
              <section class="recently-added-container">
                <ul class="list-my-leagues recently-added-list">
                  <!-- limits the length of the recently added array to 4 and finds only the posts entried by the user -->
                  <% let arr=players.filter(el=> el.user == user.id).concat(teams.filter(el => el.user == user.id),
                    leagues.filter(el => el.user == user.id)).sort((a,b) => b.createdAt-a.createdAt).slice(0,4) %>
                    <% if (arr.length> 0) { %>
                      <% arr.forEach(e=> { %>
                        <li class="item-my-leagues add-league">
                          <% if(e.player) { %>
                            <a href="players/<%= e.id%>">
                              <%= e.player %>
                            </a>
                            <% } else if(e.numberofplayers){ %>
                              <a href="teams/<%= e.id%>">
                                <%= e.team %>
                              </a>
                              <% } else { %>
                                <a href="leagues/<%= e.id%>">
                                  <%= e.league %>
                                </a>
                                <% } %>
                        </li>
                        <% })} %>

                </ul>
              </section>
            </li>
          </ul>
        </section>
        <section class="section-my-home section-my-leagues">
          <h2>pinned</h2>
          <ul class="list-my-leagues list-pinned">
            <% players.concat(teams, leagues).filter(el=> el.pinned).forEach(em => { %>
              <li class="item-my-leagues add-league">
                <% if (em.player) { %>
                  <a href="/players/<%= em.id%>">
                    <%= em.player %>
                  </a>
                  <% } else if (em.numberofplayers) { %>
                    <a href="/teams/<%= em.id%>">
                      <%= em.team %>
                    </a>
                    <% } else { %>
                      <a href="/leagues/<%= em.id%>">
                        <%= em.league %>
                      </a>
                      <% }}) %>
              </li>
          </ul>
        </section>
      </section>
      <section class="other-section"></section>
    </section>
  </main>
  <%- include('partials/home-modal') -%>
    <%- include('partials/footer') -%>
<%- include('partials/headers/header-menu') -%>

  <main class="container container-post">
    <section class="container-section-post">
      <section class="section-profile-post">
        <%if(player.user==user.id || user.teams.map(em=> em.team).includes(player.team)){ %>
          <section class="nav-profile-post">
            <img class="img-fluid post-img-top" src="<%= player.image.profile %>" />
            <section class="section-column-post">
              <section class="section-row-post">
                <section class="section-second-column-post">
                  <section class="section-each-extra-post">
                    <h1>
                      <%= player.player %>
                    </h1>
                  </section>
                  <section class="section-each-extra-post">
                    <h2>
                      <%= player.team %>
                    </h2>
                  </section>
                  <section class="section-each-extra-post">
                    <h2>
                      #17
                    </h2>
                  </section>
                </section>
                <section class="section-icons-post">
                  <form action="/players/editPlayer/<%= player.id %>?_method=PUT" method="POST">
                    <button class="btn" type="submit">
                      <i class="fa-regular fa-pen-to-square fa-xl post-btn"></i>
                    </button>
                  </form>
                  <form action="/players/pinPlayer/<%= player.id %>?_method=PUT" method="POST">
                    <button class="btn" type="submit" data-bs-toggle="tooltip" data-bs-placement="top"
                      data-bs-title="Pin it">
                      <% if (player.pinned==true ) { %>
                        <i class="fa-solid fa-thumbtack fa-xl pinned-btn"></i>
                        <% } else { %>
                          <i class="fa-solid fa-thumbtack fa-xl unpinned-btn"></i>
                          <% } %>
                    </button>
                  </form>
                  <form action="/players/deletePlayer/<%= player.id %>?_method=DELETE" method="POST">
                    <button class="btn" type="submit">
                      <i class="fa-regular fa-trash-can fa-xl post-btn"></i>
                    </button>
                  </form>
                </section>
              </section>
              <section class="section-person-post">
                <section class="section-person-post-extra-one">
                  <section class="section-each-extra-post">
                    <h2>
                      <%= player.win %>-<%= player.loss%> | <%=
                            `.${(Number(player.win)/(Number(player.win)+Number(player.loss))).toFixed(3).toString().split('.')[1]}`
                            %>%
                    </h2>
                    <span>w-l | pct </span>
                  </section>
                  <section class="section-each-extra-post">
                    <h2>
                      <%= player.position %>
                    </h2>
                    <span>position</span>
                  </section>
                </section>
                <section class="section-person-post-extra-two">
                  <section class="section-each-extra-post">
                    <h2>
                      <%= %>
                    </h2>
                    <span>height</span>
                  </section>
                  <section class="section-each-extra-post">
                    <h2>
                      <%= %>
                    </h2>
                    <span>weight</span>
                  </section>
                  <section class="section-each-extra-post">
                    <h2>
                      <%= %>
                    </h2>
                    <span>age</span>
                  </section>
                </section>
              </section>
            </section>
          </section>

      </section>
      <section class="section-table-post">
        <h3 class="player-stats-header ">PLAYER STATS</h3>
        <table class="team-table table table-bordered table-striped table-responsive-md text-center table-hover">

          <thead>
            <tr class="table-head">
              <th>MATCHUP</th>
              <th>W/L</th>
              <% if (player.sport=='BASKETBALL' ) { %>
                <th>PTS</th>
                <th>REB</th>
                <th>AST</th>
                <th>STL</th>
                <th>BLK</th>
                <th>TOV</th>
                <th>PF</th>
                <% } else if (player.sport=='BASEBALL' ) { %>
                  <th>RUNS</th>
                  <th>HITS</th>
                  <th>2B</th>
                  <th>3B</th>
                  <th>HR</th>
                  <th>RBI</th>
                  <th>SO</th>
                  <% } else if (player.sport=='FOOTBALL' ){ %>
                    <th>TOTAL YARDS</th>
                    <th>PASSING YARDS</th>
                    <th>RUSHING YARDS</th>
                    <th>POINTS</th>
                    <th>FUMBLES</th>
                    <th>INTERCEPTIONS</th>
                    <th>SACKS</th>
                    <% } else if (player.sport=='SOCCER' ){ %>
                      <th>GOALS</th>
                      <th>SHOTS ON TARGET</th>
                      <th>PK</th>
                      <th>CORNERS</th>
                      <th>YELLOW CARDS</th>
                      <th>RED CARDS</th>
                      <th>OWN GOALS</th>
                      <% } else { %>
                        <th>TBD</th>
                        <th>TBD</th>
                        <th>TBD</th>
                        <th>TBD</th>
                        <th>TBD</th>
                        <th>TBD</th>
                        <th>TBD</th>
                        <% } %>
                          <th></th>
                          <th id="add-row">
                            <button type="button" class="btn add-row" data-bs-toggle="modal"
                              data-bs-target="#player-add-row">
                              <i class="fa-solid fa-circle-plus fa-xl add-row-btn"></i>
                            </button>
                          </th>
            </tr>
          </thead>
          <tbody>
            <% if (player.table.length> 0) { %>
              <% player.table.sort((a, b)=> b.row.cell1-a.row.cell1).forEach(el=> { %>
                <tr class="table-light">
                  <td>
                    <%= el.row.cell1 %>
                  </td>
                  <td>
                    <%= el.row.cell2 %>
                  </td>
                  <td>
                    <%= el.row.cell3 %>
                  </td>
                  <td>
                    <%= el.row.cell4 %>
                  </td>
                  <td>
                    <%= el.row.cell5 %>
                  </td>
                  <td>
                    <%= el.row.cell6 %>
                  </td>
                  <td>
                    <%= el.row.cell7 %>
                  </td>
                  <td>
                    <%= el.row.cell8 %>
                  </td>
                  <td>
                    <%= el.row.cell9 %>
                  </td>
                  <td class="btns-table">
                    <button class="btn" type="button" data-bs-toggle="modal" data-bs-target="#player-edit-row">
                      <i class="fa-regular fa-pen-to-square fa-lg post-btn"></i>
                    </button>
                  </td>
                  <td class="btns-table">
                    <form action="/players/deleteRow/<%= el._id %>?_method=DELETE" method="POST">
                      <button class="btn" type="submit">
                        <i class="fa-regular fa-trash-can fa-lg post-btn"></i>
                      </button>
                    </form>
                  </td>
                </tr>


                <!-- EDIT ROW MODAL -->

                <div class="modal fade" id="player-edit-row" tabindex="-1" role="dialog"
                  aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
                  <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title" id="exampleModalLongTitle">Edit Row</h5>
                        <i class="fa-solid fa-square-xmark close" data-bs-dismiss="modal"></i>
                      </div>
                      <div class="modal-body">
                        <div class="mb-3">
                          <form action="/players/editRow/<%= el._id %>?_method=PUT" method="POST"
                            class="player-edit-modal">
                            <div class="mb-3">
                              <label for="cell1" class="form-label edit-label"></label>
                              <input type="text" class="form-control form-control-sm" id="cell1" name="cell1"
                                placeholder="" value="<%= el.row.cell1 %>">
                            </div>
                            <div class="mb-3">
                              <label for="cell2" class="form-label edit-label"></label>
                              <input type="text" class="form-control form-control-sm" id="cell2" name="cell2"
                                placeholder="" value="<%= el.row.cell2 %>">
                            </div>
                            <div class="mb-3">
                              <label for="cell3" class="form-label edit-label"></label>
                              <input type="text" class="form-control form-control-sm" id="cell3" name="cell3"
                                placeholder="#" value="<%= el.row.cell3 %>">
                            </div>
                            <div class="mb-3">
                              <label for="cell4" class="form-label edit-label"></label>
                              <input type="text" class="form-control form-control-sm" id="cell4" name="cell4"
                                placeholder="#" value="<%= el.row.cell4 %>">
                            </div>
                            <div class="mb-3">
                              <label for="cell5" class="form-label edit-label"></label>
                              <input type="text" class="form-control form-control-sm" id="cell5" name="cell5"
                                placeholder="#" value="<%= el.row.cell5 %>">
                            </div>
                            <div class="mb-3">
                              <label for="cell6" class="form-label edit-label"></label>
                              <input type="text" class="form-control form-control-sm" id="cell6" name="cell6"
                                placeholder="#" value="<%= el.row.cell6 %>">
                            </div>
                            <div class="mb-3">
                              <label for="cell7" class="form-label edit-label"></label>
                              <input type="text" class="form-control form-control-sm" id="cell7" name="cell7"
                                placeholder="#" value="<%= el.row.cell7 %>">
                            </div>
                            <div class="mb-3">
                              <label for="cell8" class="form-label edit-label"></label>
                              <input type="text" class="form-control form-control-sm" id="cell8" name="cell8"
                                placeholder="#" value="<%= el.row.cell8 %>">
                            </div>
                            <div class="mb-3">
                              <label for="cell9" class="form-label edit-label"></label>
                              <input type="text" class="form-control form-control-sm" id="cell9" name="cell9"
                                placeholder="#" value="<%= el.row.cell9 %>">
                            </div>
                            <div class="modal-footer">
                              <button type="submit" class="btn btn-primary submit" value="Upload">Submit</button>
                            </div>
                          </form>
                        </div>
                      </div>
                    </div>
                  </div>
                  <% })} %>
          </tbody>
        </table>

      </section>
      <%}%>
        </div>
        </div>
    </section>
    </section>
  </main>

  <%- include('partials/footer') -%>

    <!-- ATTEMPT DIAGONAL LINE -->

    <!-- <section class="section-person-post-extra">
  <div class="post">
    <h3 class=""><%= player.player %></h3>
  </div>
  
  <div class="div-post">
    <h2 class="" >player</h2>
   
  </div>
</section>
<section class="section-person-post-extra">
  
  <div class="post">
    <h3 class=""><%= player.team %></h3>
  </div>
  <div class="div-post">
    <h2 class="" >team</h2>
   
  </div>
  
</section> -->